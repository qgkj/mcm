<!doctype html>
<html lang="chs">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0,user-scalable=0">
    <title>MCM_更新操作</title>
    <link rel="stylesheet" type="text/css" href="../css/common.css" />
    <script type="text/javascript" src="../script/common.js"></script>
    <style>
    	
    </style>
    <script type="text/javascript">
		var mcm = null;
		var query = null;
		var clazzNode = null;
		apiready = function(){
	    	mcm = api.require('model');
	    	query = api.require('query');
	    	clazzNode = document.getElementById('clzz');
	    	//在线编译正式版时，可以不用配置,APICloud会取当前应用的配置
	    	mcm.config({
	    		appId:"A6964774665539", 
	    		appKey:"1E4DC0BD-06DD-F21D-D0A3-05899926188B", 
	    		url:'https://d.apicloud.com'
	    	});
	    }
	    
		var clazz = "Endo";
		
		function checkClass(){
			clazz = clazzNode.value;
		}
		
		function mcm_updateAll(){
			;
		}
		
		function mcm_updateById(){
			checkClass();
			var clazzId = document.getElementById('clzzId').value;
			if(!clazzId){
				showAlert('数据Id不能为空');
				return;
			}
			var param = {class:clazz, id:clazzId};
			param.value = {name:'哈哈哈哈', user:[{a:'aa'}, {b:'bb'}, {c:'ee'}]};
			loading();
			mcm.updateById(param, function(ret, err){
				finishing();
				if(ret){
					showAlert(JSON.stringify(ret));
				}else{
					showAlert(JSON.stringify(err));
				}
			});
		}
		
	</script>
</head>
<body>
    <div >
        <div id="main"> 
            <div>
            	<div class="line">更新操作</div>
            	<div>被操作Class：<input type="text" value="Endo" id="clzz"/></div>
            	<br>
            	<div>被更新数据的id：<input type="text" value="54b3d0698e40473a64f16cfe" id="clzzId"/></div>
            	<div class="btn" tapmode="active" onclick="mcm_updateById()" >根据ID更新</div>
            	<div class="btn" tapmode="active" onclick="mcm_updateAll()" >根据条件更新（暂不支持）</div> 
            </div>
        </div>   
    </div>
</body>
</html>